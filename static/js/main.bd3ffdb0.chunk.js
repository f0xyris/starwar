(this["webpackJsonpreact-starwars"]=this["webpackJsonpreact-starwars"]||[]).push([[0],{42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),s=n(21),i=n.n(s),o=n(8),u=n(12),l=(n(42),function(){return Object(r.jsx)("div",{className:"header container-fluid",children:Object(r.jsxs)("div",{className:"container d-flex align-items-center header-wrapper",children:[Object(r.jsx)("h4",{className:"header-logo flex-grow-1",children:Object(r.jsx)(u.b,{to:"/",children:"Star Wars"})}),Object(r.jsxs)("ul",{className:"d-flex header-nav",children:[Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/favorites",children:"Favorite"})}),Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/peoples",children:"People"})})]})]})})}),p=n(4),j=n(5),d=n(7),f=n(10),b=n(9),O=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.favoriteItems.map((function(e){return Object(r.jsxs)("li",{className:"list-group-item",children:[Object(r.jsx)("i",{className:"fa fa-".concat(e.gender," fa-cog"),"aria-hidden":"true"}),Object(r.jsx)("span",{className:"people-list-item_name",children:e.name})]},e.id)}));return Object(r.jsx)("div",{className:"container-fluid flex-grow-1 page favorite-page",children:Object(r.jsx)("div",{className:"container default-page",children:Object(r.jsx)("ul",{className:"people-list list-group",children:e})})})}}]),n}(a.Component),m=Object(o.b)((function(e){return{favoriteItems:e.favoriteItems}}))(O),h=n(32),v=n(2),x=c.a.createContext(),E=x.Provider,g=x.Consumer,I=function(){return function(e){return function(t){return Object(r.jsx)(g,{children:function(n){return Object(r.jsx)(e,Object(v.a)(Object(v.a)({},t),{},{starwarService:n}))}})}}},_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},S=function(e){var t=e.item,n=e.value,a=e.idx;return Object(r.jsxs)("li",{className:"list-group-item",children:[t,Object(r.jsx)("span",{children:n})]},a)},y=function(e,t){return function(){t({type:"FETCH_PEOPLE_REQUEST"}),e.getAllPeopleData().then((function(e){return t({type:"FETCH_PEOPLE_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_PEOPLE_FAILURE",payload:e})}))}},C=function(e,t){return function(){t({type:"FETCH_PEOPLE_REQUEST"}),e.getAllFilmsData().then((function(e){return t({type:"FETCH_FILMS_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_FILMS_FAILURE",payload:e})}))}},N=function(e,t){return function(){t({type:"FETCH_PEOPLE_REQUEST"}),e.getAllStarshipsData().then((function(e){return t({type:"FETCH_STARSHIPS_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_STARSHIPS_FAILURE",payload:e})}))}},F=function(e,t){return function(){t({type:"FETCH_PEOPLE_REQUEST"}),e.getAllSpeciesData().then((function(e){return t({type:"FETCH_SPECIES_SUCCESS",payload:e})})).catch((function(e){return t({type:"FETCH_SPECIES_FAILURE",payload:e})}))}},w=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selectedItem,n=e.onAddToFavorite,a=e.favoriteItems,c=e.onRemoveFromFavorite,s=t.name,i=t.height,o=t.mass,u=t.hair_color,l=t.skin_color,p=t.eye_color,j=t.birth_year,d=t.gender,f=a.findIndex((function(e){return e.id===t.id})),b={height:i,mass:o,hair_color:u,skin_color:l,eye_color:p,birth_year:j,gender:d},O=Object.entries(b).map((function(e){var t=Object(h.a)(e,3),n=t[0],a=t[1],c=t[2];return n=(n=n.charAt(0).toUpperCase()+n.slice(1)).split("_").join(" "),"n/a"!==a&&"unknown"!==a||(a="-"),Object(r.jsx)(S,{item:n,value:a,idx:c})}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"d-flex flex-grow-1 justify-content-between",children:[Object(r.jsx)("h3",{className:"active-item__name",children:s}),f<0?Object(r.jsx)("button",{onClick:function(){return n()},className:"btn btn-secondary",children:"Add to favorite"}):Object(r.jsx)("button",{onClick:function(){return c()},className:"btn btn-danger",children:"Remove item from favorite"})]}),Object(r.jsx)("ul",{className:"list-group",children:O})]})}}]),n}(a.Component),T=_(I(),Object(o.b)((function(e){return{selectedItem:e.selectedItem,favoriteItems:e.favoriteItems}}),(function(e){return{onAddToFavorite:function(){return e({type:"ON_ADD_TO_FAVORITE"})},onRemoveFromFavorite:function(){return e({type:"ON_REMOVE_FROM_FAVORITE"})}}})))(w),P=function(e){var t=e.item,n=e.idx;return Object(r.jsx)("li",{className:"list-group-item",children:t.title},n)},A=(n(44),function(){return Object(r.jsx)("div",{className:"spinner",children:Object(r.jsx)("div",{className:"atom-spinner",children:Object(r.jsxs)("div",{className:"spinner-inner",children:[Object(r.jsx)("div",{className:"spinner-line"}),Object(r.jsx)("div",{className:"spinner-line"}),Object(r.jsx)("div",{className:"spinner-line"}),Object(r.jsx)("div",{className:"spinner-circle",children:"\u25cf"})]})})})}),R=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchFilms()}},{key:"render",value:function(){var e=this.props,t=e.filmsItem;return e.loading?Object(r.jsx)(A,{}):Object(r.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(r.jsx)(P,{item:e,idx:t})}))})}}]),n}(a.Component),k=_(I(),Object(o.b)((function(e){return{filmsItem:e.filmsItem,loading:e.loading}}),(function(e,t){var n=t.starwarService;return{fetchFilms:C(n,e)}})))(R),H=function(e){var t=e.item,n=e.idx;return Object(r.jsx)("li",{className:"list-group-item",children:t.name},n)},U=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchSpecies()}},{key:"render",value:function(){var e=this.props,t=e.speciesItem;return e.loading?Object(r.jsx)(A,{}):Object(r.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(r.jsx)(H,{item:e,idx:t})}))})}}]),n}(a.Component),L=_(I(),Object(o.b)((function(e){return{speciesItem:e.speciesItem,loading:e.loading}}),(function(e,t){var n=t.starwarService;return{fetchSpecies:F(n,e)}})))(U),D=function(e){var t=e.item,n=e.idx;return Object(r.jsx)("li",{className:"list-group-item",children:t.model},n)},M=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchStarships()}},{key:"render",value:function(){var e=this.props,t=e.starshipsItem;return e.loading?Object(r.jsx)(A,{}):Object(r.jsx)("ul",{className:"list-group",children:t.map((function(e,t){return Object(r.jsx)(D,{item:e,idx:t})}))})}}]),n}(a.Component),Q=_(I(),Object(o.b)((function(e){return{starshipsItem:e.starshipsItem,loading:e.loading}}),(function(e,t){var n=t.starwarService;return{fetchStarships:N(n,e)}})))(M),V=function(e){switch(e.itemId){case"films":return Object(r.jsx)(k,{});case"starships":return Object(r.jsx)(Q,{});case"species":return Object(r.jsx)(L,{});default:return!1}},J=function(e){var t=e.match;return Object(r.jsx)("div",{className:"container-fluid flex-grow-1 page",children:Object(r.jsxs)("div",{className:"container default-page",children:[Object(r.jsx)(T,{}),Object(r.jsxs)("div",{className:"btn-group",role:"group",children:[Object(r.jsx)(u.b,{className:"btn btn-secondary",to:"".concat(t.url,"/films"),children:"Films"}),Object(r.jsx)(u.b,{className:"btn btn-secondary",to:"".concat(t.url,"/starships"),children:"Starships"}),Object(r.jsx)(u.b,{className:"btn btn-secondary",to:"".concat(t.url,"/species"),children:"Species"})]}),Object(r.jsx)(p.a,{path:"".concat(t.url,"/:id"),render:function(e){var t=e.match.params.id;return Object(r.jsx)(V,{itemId:t})}})]})})},X=(n(45),function(e){var t=e.item,n=t.name,a=t.gender;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("i",{className:"fa fa-".concat(a," fa-cog"),"aria-hidden":"true"}),Object(r.jsx)("span",{className:"people-list-item_name",children:n})]})}),B=(n(46),function(e){var t=e.onItemSelected,n=e.filteredProducts,a=e.onIncreaseCount;return e.loading?Object(r.jsx)(A,{}):Object(r.jsxs)("div",{className:"",children:[Object(r.jsx)("ul",{className:"people-list list-group",children:n&&n.map((function(e,n){return Object(r.jsx)(u.b,{to:"/details",onClick:function(){return t(e.id)},className:"list-group-item",children:Object(r.jsx)(X,{item:e})},n)}))}),Object(r.jsx)("div",{className:"pagination",children:Object(r.jsx)("button",{className:"btn btn-secondary",onClick:function(){return a()},children:"More people"})})]})}),G=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchPeople()}},{key:"render",value:function(){var e=this.props,t=e.onItemSelected,n=e.onIncreaseCount,a=e.filteredProducts,c=e.loading;return Object(r.jsx)(B,{onItemSelected:t,onIncreaseCount:n,filteredProducts:a,loading:c})}}]),n}(a.Component),$=_(I(),Object(o.b)((function(e){return{filteredProducts:e.filteredProducts,loading:e.loading}}),(function(e,t){var n=t.starwarService;return{fetchPeople:y(n,e),onItemSelected:function(t){return e({type:"ON_ITEM_SELECTED",payload:t})},onIncreaseCount:function(){return e({type:"ON_INCREASE_COUNT"})}}})))(G),W=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.onInputChange;return Object(r.jsx)("div",{className:"d-flex flex-grow-1",children:Object(r.jsx)("input",{className:"flex-grow-1 searchField",onChange:function(t){return e(t.target.value)},type:"text",placeholder:"Try to search any hero..."})})}}]),n}(a.Component),q=Object(o.b)(null,(function(e){return{onInputChange:function(t){return e(function(e){return{type:"ON_INPUT_CHANGE",payload:e}}(t))}}}))(W),z=(n(47),function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){return Object(j.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"container-fluid flex-grow-1 page",children:Object(r.jsxs)("div",{className:"container default-page",children:[Object(r.jsx)(q,{}),Object(r.jsx)($,{})]})})}}]),n}(a.Component)),K=Object(o.b)((function(e){return{loading:e.loading}}))(z),Y=(n(48),n.p+"static/media/starwar-bg.79db3e4a.jpg"),Z=function(){return Object(r.jsxs)("main",{role:"main",className:"starwars-app",children:[Object(r.jsx)(l,{}),Object(r.jsxs)(p.c,{children:[Object(r.jsx)(p.a,{path:"/",render:function(){return Object(r.jsx)("img",{className:"flex-grow-1",src:Y,alt:"starwar-background"})},exact:!0}),Object(r.jsx)(p.a,{path:"/favorites/",component:m}),Object(r.jsx)(p.a,{path:"/peoples/",component:K}),Object(r.jsx)(p.a,{path:"/details/",component:J})]})]})},ee=function(){return Object(r.jsx)("div",{children:"Error!"})},te=function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(j.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(d.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(r.jsx)(ee,{}):this.props.children}}]),n}(a.Component),ne=n(6),re=n.n(ne),ae=n(17),ce=n(16),se=n(23),ie={people:[],loading:!1,error:null,selectedItem:[],filmsItem:[],filmsItemId:[],starshipsItem:[],starshipsItemId:[],speciesItem:[],speciesItemId:[],filteredProducts:[],allPeople:[],favoriteItems:[]},oe=10,ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t.type),t.type){case"FETCH_PEOPLE_REQUEST":return Object(v.a)(Object(v.a)({},e),{},{people:[],loading:!0,error:null});case"FETCH_PEOPLE_SUCCESS":var n=t.payload,r=n.slice(0,oe);return Object(v.a)(Object(v.a)({},e),{},{people:r,allPeople:n,filteredProducts:r,loading:!1,error:null});case"FETCH_PEOPLE_FAILURE":return Object(v.a)(Object(v.a)({},e),{},{people:[],loading:!1,error:t.payload});case"FETCH_FILMS_REQUEST":return Object(v.a)(Object(v.a)({},e),{},{filmsItem:[],loading:!0,error:null});case"FETCH_FILMS_SUCCESS":var a=t.payload,c=e.filmsItemId.map((function(e){return a[e-1]}));return Object(v.a)(Object(v.a)({},e),{},{filmsItem:c,loading:!1,error:null});case"FETCH_FILMS_FAILURE":return Object(v.a)(Object(v.a)({},e),{},{filmsItem:[],loading:!1,error:t.payload});case"FETCH_STARSHIPS_REQUEST":return Object(v.a)(Object(v.a)({},e),{},{starshipsItem:[],loading:!0,error:null});case"FETCH_STARSHIPS_SUCCESS":var s=t.payload,i=s.filter((function(t){return-1!==e.starshipsItemId.indexOf(t.id)}));return Object(v.a)(Object(v.a)({},e),{},{starshipsItem:i,loading:!1,error:null});case"FETCH_STARSHIPS_FAILURE":return Object(v.a)(Object(v.a)({},e),{},{starshipsItem:[],loading:!1,error:t.payload});case"FETCH_SPECIES_REQUEST":return Object(v.a)(Object(v.a)({},e),{},{speciesItem:[],loading:!0,error:null});case"FETCH_SPECIES_SUCCESS":var o=t.payload,u=e.allSpecies.map((function(e){return o[e-1]}));return Object(v.a)(Object(v.a)({},e),{},{speciesItem:u,loading:!1,error:null});case"FETCH_SPECIES_FAILURE":return Object(v.a)(Object(v.a)({},e),{},{speciesItem:[],loading:!1,error:t.payload});case"ON_ITEM_SELECTED":var l=t.payload,p=e.people.find((function(e){return e.id===l})),j=p.films,d=p.starships,f=p.species,b=/\/([0-9]*)\/$/,O=j.map((function(e){return e.match(b)[1]})),m=d.map((function(e){return e.match(b)[1]})),h=f.map((function(e){return e.match(b)[1]}));return Object(v.a)(Object(v.a)({},e),{},{selectedItem:p,filmsItemId:O,starshipsItemId:m,speciesItemId:h});case"ON_INPUT_CHANGE":var x=t.payload,E=Object.assign({},e),g=e.people,I=g.filter((function(e){return e.name.toLowerCase().includes(x.toLowerCase())}));return E.filteredProducts=""!==x?I:E.people,E;case"ON_INCREASE_COUNT":oe+=10;var _=Object.assign({},e);return _.filteredProducts=e.allPeople.slice(0,oe),_.people=_.filteredProducts,_;case"ON_ADD_TO_FAVORITE":var S=e.favoriteItems,y=e.selectedItem,C=S.findIndex((function(e){return e.id===y.id}));return C<0?Object(v.a)(Object(v.a)({},e),{},{favoriteItems:[].concat(Object(ae.a)(S),[y])}):Object(v.a)(Object(v.a)({},e),{},{favoriteItems:[].concat(Object(ae.a)(S.slice(0,C)),[y],Object(ae.a)(S.slice(C+1)))});case"ON_REMOVE_FROM_FAVORITE":var N=e.favoriteItems.findIndex((function(t){return t.id===e.selectedItem.id}));return N<0?Object(v.a)({},e):Object(v.a)(Object(v.a)({},e),{},{favoriteItems:[].concat(Object(ae.a)(e.favoriteItems.slice(0,N)),Object(ae.a)(e.favoriteItems.slice(N+1)))});default:return e}},le=Object(se.b)(ue,function(){try{var e=localStorage.getItem("persistantState");if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}}(),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());le.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("persistantState",t)}catch(n){console.warn(n)}}(le.getState())}));var pe=le,je=new function e(){var t=this;Object(j.a)(this,e),this._apiBase="https://swapi.dev/api",this._extractId=function(e){return e.url.match(/\/([0-9]*)\/$/)[1]},this._transformPerson=function(e){return Object(v.a)(Object(v.a)({},e),{},{id:t._extractId(e)})},this._transformStarship=function(e){return Object(v.a)(Object(v.a)({},e),{},{id:t._extractId(e)})},this.getResource=function(){var e=Object(ce.a)(re.a.mark((function e(n){var r,a,c,s;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],a="".concat(t._apiBase).concat(n);case 2:return e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:s=e.sent,a=s.next,r.push.apply(r,Object(ae.a)(s.results));case 10:if(a){e.next=2;break}case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getAllPeople=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/people/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformPerson));case 4:case"end":return e.stop()}}),e)}))),this.getAllPeopleData=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAllPeople(),e.abrupt("return",new Promise((function(e){e(n)})));case 2:case"end":return e.stop()}}),e)}))),this.getAllFilms=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/films/");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.getAllFilmsData=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAllFilms(),e.abrupt("return",new Promise((function(e){e(n)})));case 2:case"end":return e.stop()}}),e)}))),this.getAllStarships=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/starships/");case 2:return n=e.sent,e.abrupt("return",n.map(t._transformStarship));case 4:case"end":return e.stop()}}),e)}))),this.getAllStarshipsData=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAllStarships(),e.abrupt("return",new Promise((function(e){e(n)})));case 2:case"end":return e.stop()}}),e)}))),this.getAllSpecies=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/species/");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.getAllSpeciesData=Object(ce.a)(re.a.mark((function e(){var n;return re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.getAllSpecies(),e.abrupt("return",new Promise((function(e){e(n)})));case 2:case"end":return e.stop()}}),e)})))};i.a.render(Object(r.jsx)(o.a,{store:pe,children:Object(r.jsx)(te,{children:Object(r.jsx)(E,{value:je,children:Object(r.jsx)(u.a,{children:Object(r.jsx)(Z,{})})})})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.bd3ffdb0.chunk.js.map